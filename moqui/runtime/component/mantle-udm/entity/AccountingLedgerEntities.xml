<?xml version="1.0" encoding="UTF-8"?>
<!--
This software is in the public domain under CC0 1.0 Universal plus a 
Grant of Patent License.

To the extent possible under law, the author(s) have dedicated all
copyright and related and neighboring rights to this software to the
public domain worldwide. This software is distributed without any
warranty.

You should have received a copy of the CC0 Public Domain Dedication
along with this software (see the LICENSE.md file). If not, see
<http://creativecommons.org/publicdomain/zero/1.0/>.
-->
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">
    <!-- ========================================================= -->
    <!--  - mantle.ledger.account -->
    <!--  - mantle.ledger.config -->
    <!--  - mantle.ledger.reconciliation -->
    <!--  - mantle.ledger.transaction -->
    <!-- ========================================================= -->

    <!-- ========================================================= -->
    <!-- mantle.ledger.account -->
    <!-- ========================================================= -->

    <entity entity-name="GlAccount" package="mantle.ledger.account" use="configuration" cache="true">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="parentGlAccountId" type="id"/>
        <field name="glAccountTypeEnumId" type="id"><description>Optional. The 'type' of account, used in posting (GL mapping) configuration</description></field>
        <field name="glAccountClassEnumId" type="id"><description>Required. The account classification such as Revenue, Expense, Asset, etc.
            Used for report structure and to determine if account is a debit or credit account.</description></field>
        <field name="isDebit" type="text-indicator"><description>Y if account class is a Debit class, otherwise a Credit;
            determined automatically by class and saved here</description></field>
        <field name="isTemporary" type="text-indicator"><description>Y if account is a temporary (income statement) account,
            determined automatically by class and saved here</description></field>
        <field name="glResourceTypeEnumId" type="id"/>
        <field name="glXbrlClassEnumId" type="id"/>
        <field name="accountCode" type="text-medium" default="glAccountId"/>
        <field name="accountName" type="text-medium"/>
        <field name="description" type="text-medium"/>
        <field name="externalId" type="id"><description>ID of the account in an external system where the accounts are imported/exported</description></field>
        <field name="disallowPosting" type="text-indicator"/>

        <relationship type="one" title="Parent" related="mantle.ledger.account.GlAccount" short-alias="parent">
            <key-map field-name="parentGlAccountId" related="glAccountId"/></relationship>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration" short-alias="typeEnum">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" title="GlAccountClass" related="moqui.basic.Enumeration" short-alias="classEnum">
            <key-map field-name="glAccountClassEnumId"/></relationship>
        <relationship type="one" title="GlResourceType" related="moqui.basic.Enumeration" short-alias="resourceTypeEnum">
            <key-map field-name="glResourceTypeEnumId"/></relationship>
        <relationship type="one" title="GlXbrlClass" related="moqui.basic.Enumeration">
            <key-map field-name="glXbrlClassEnumId"/></relationship>

        <index name="GLACCT_UNQCD" unique="true"><index-field name="accountCode"/></index>

        <seed-data>
            <moqui.basic.EnumerationType description="GL Account Class" enumTypeId="GlAccountClass"/>
            <moqui.basic.Enumeration description="Resource" enumId="RESOURCE" enumTypeId="GlAccountClass"/>
            <moqui.basic.Enumeration description="Non-Posting" enumId="NON_POSTING" parentEnumId="DEBIT" enumTypeId="GlAccountClass"/>
            <moqui.basic.Enumeration description="Debit" enumId="DEBIT" enumTypeId="GlAccountClass"/>
            <moqui.basic.Enumeration description="Credit" enumId="CREDIT" enumTypeId="GlAccountClass"/>

            <moqui.basic.Enumeration description="GL Account Class Groups" enumId="EngGlClassGroups" enumTypeId="EnumGroup"/>
            <moqui.basic.EnumerationType description="GL Account Type" enumTypeId="GlAccountType"/>

            <!-- GL Resource Type -->
            <moqui.basic.EnumerationType description="GL Resource Type" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Money" enumId="GlrtMoney" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Raw Material" enumId="GlrtRawMaterial" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Labor" enumId="GlrtLabor" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Service" enumId="GlrtService" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Finished Good" enumId="GlrtFinishedGood" enumTypeId="GlResourceType"/>
            <moqui.basic.Enumeration description="Delivered Good" enumId="GlrtDeliveredGood" enumTypeId="GlResourceType"/>

            <!-- GL XBRL Class -->
            <moqui.basic.EnumerationType description="GL XBRL Class" enumTypeId="GlXbrlClass"/>
            <moqui.basic.Enumeration description="US GAAP" enumId="US_GAAP" enumTypeId="GlXbrlClass"/>
            <moqui.basic.Enumeration description="IAS" enumId="IAS" enumTypeId="GlXbrlClass"/>
        </seed-data>
    </entity>

    <entity entity-name="GlAccountCategory" package="mantle.ledger.account">
        <field name="glAccountCategoryId" type="id" is-pk="true"/>
        <field name="categoryTypeEnumId" type="id"/>
        <field name="description" type="text-medium"/>
        <relationship type="one" title="GlAccountCategoryType" related="moqui.basic.Enumeration">
            <key-map field-name="categoryTypeEnumId"/></relationship>
        <seed-data>
            <!-- GL Account Category Type -->
            <moqui.basic.EnumerationType description="GL Account Category Type" enumTypeId="GlAccountCategoryType"/>
            <moqui.basic.Enumeration enumId="COST_CENTER" description="Cost Center Category" enumTypeId="GlAccountCategoryType"/>
        </seed-data>
    </entity>
    <entity entity-name="GlAccountCategoryMember" package="mantle.ledger.account">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="glAccountCategoryId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <field name="amountPercentage" type="number-decimal"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" related="mantle.ledger.account.GlAccountCategory"/>
    </entity>
    <entity entity-name="GlAccountGroup" package="mantle.ledger.account">
        <description>A grouping of GlAccount records for purposes of reporting and populating forms such as tax forms.
            It is structured so that each GlAccount can be a member of at most one group of each type.</description>
        <field name="glAccountGroupId" type="id" is-pk="true"/>
        <field name="groupTypeEnumId" type="id"/>
        <field name="description" type="text-medium"/>
        <relationship type="one" title="GlAccountGroupType" related="moqui.basic.Enumeration">
            <key-map field-name="groupTypeEnumId"/></relationship>
    </entity>
    <entity entity-name="GlAccountGroupMember" package="mantle.ledger.account">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="groupTypeEnumId" type="id" is-pk="true"/>
        <field name="glAccountGroupId" type="id"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" title="GlAccountGroupType" related="moqui.basic.Enumeration">
            <key-map field-name="groupTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccountGroup"/>
    </entity>

    <entity entity-name="GlAccountOrganization" package="mantle.ledger.account" use="transactional" cache="never">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="postedBalance" type="currency-amount"/>
        <field name="balanceLastUpdated" type="date-time"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
    </entity>
    <entity entity-name="GlAccountOrgTimePeriod" package="mantle.ledger.account" use="transactional" cache="never">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="timePeriodId" type="id" is-pk="true"/>
        <field name="postedDebits" type="currency-amount"/>
        <field name="postedCredits" type="currency-amount"/>
        <field name="postedDebitsNoClosing" type="currency-amount"/>
        <field name="postedCreditsNoClosing" type="currency-amount"/>
        <field name="beginningBalance" type="currency-amount"/>
        <field name="endingBalance" type="currency-amount"/>
        <field name="balanceLastUpdated" type="date-time"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.party.time.TimePeriod"/>
    </entity>

    <entity entity-name="GlAccountParty" package="mantle.ledger.account">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" related="mantle.party.Party"/>
        <relationship type="one" related="mantle.party.RoleType"/>
    </entity>
    <entity entity-name="GlBudgetXref" package="mantle.ledger.account">
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="budgetItemTypeEnumId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <field name="allocationPercentage" type="number-decimal"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" related="moqui.basic.Enumeration">
            <description>(enumTypeId = BUDGET_ITEM_TYPE)</description>
            <key-map field-name="budgetItemTypeEnumId"/>
        </relationship>
    </entity>
    <entity entity-name="GlAccountEnumAppl" package="mantle.ledger.account">
        <description>Used to specify relevant GL Accounts for an Enumeration (expense, revenue, etc); not related to posting conf</description>
        <field name="glAccountId" type="id" is-pk="true"/>
        <field name="enumId" type="id" is-pk="true"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount" short-alias="glAccount"/>
        <relationship type="one" related="moqui.basic.Enumeration" short-alias="enum"/>
    </entity>

    <!-- ========================================================= -->
    <!-- mantle.ledger.config -->
    <!-- ========================================================= -->

    <entity entity-name="AssetTypeGlAccount" package="mantle.ledger.config" use="configuration">
        <description>Found by assetId, then by assetTypeEnumId and classEnumId, then by just assetTypeEnumId</description>
        <!--
        - Inventory Purchase: credit Accounts Payable, debit Unreceived Inventory
        - Inventory Receipt: credit Unreceived Inventory, debit Inventory

        - Inventory Receipt (production run): credit WIP Inventory, debit Inventory (typically Finished Good inventory)
          - NOTE: for this to be correct the Asset.acquireCost must be calculated from the production run
          - TODO: For production labor, etc there would be a separate posting (like inventory issuance) to debit WIP Inventory, credit an Operations account

        - Inventory Run Consume (issuance): credit Raw Material Inventory (or Finished Good?), debit Work In Progress Inventory
        - Inventory Run Produce (receipt): credit Work In Progress Inventory, debit Finished Good Inventory (or Raw Material if sub-assembly)

        - Inventory Sale: credit Sales, debit Accounts Receivable
        - Inventory Issuance: credit Inventory, debit COGS
        - Inventory Issuance (production run, same owner):
            credit Inventory (typically Raw Materials Inventory), debit WIP Inventory
        - Inventory Issuance (production run, asset owner different from run owner, same as sale!):
            credit Inventory (typically Raw Materials Inventory), debit COGS

        - Inventory Shrinkage: credit Inventory, debit Inventory Shrinkage
        - Inventory Found: credit Inventory Found, debit Inventory


        - Fixed Asset Purchase: credit Accounts Payable, debit Unreceived Asset
        - Fixed Asset Receipt: credit Unreceived Asset, debit Asset (fixed assets)

        - Fixed Asset Depreciate: debit Depreciation Expense, credit Accumulated Depreciation

        - Fixed Asset Sale (profit: (sale amount - (acquireCost - depreciation)) > 0):
            credit Profit/Gain on Sale/Disposal (sale amount - (acquireCost - depreciation)),
            credit Unissued Asset (acquireCost),
            debit Accounts Receivable (sale amount),
            debit Accumulated Depreciation (depreciation)
        - Fixed Asset Sale (loss: (sale amount - (acquireCost - depreciation)) < 0):
            debit Loss on Sale/Disposal (sale amount - (acquireCost - depreciation)),
            credit Unissued Asset (acquireCost),
            debit Accounts Receivable (sale amount),
            debit Accumulated Depreciation (depreciation)
        - Fixed Asset Write Off or Remove (no invoice, do as part of create issuance with no invoice):
            debit Loss on Sale/Disposal (acquireCost - depreciation; if 0, fully depreciated, skip this),
            credit Unissued Asset (acquireCost),
            debit Accumulated Depreciation (depreciation)

        - Fixed Asset Issuance: credit Asset, debit Unissued Asset

        - Fixed Asset Shrinkage: credit Asset, debit Asset Lost
        - Fixed Asset Found: credit Asset Found, debit Asset
        -->
        <field name="assetTypeGlAccountId" type="id" is-pk="true"/>
        <field name="assetTypeEnumId" type="id"/>
        <field name="classEnumId" type="id"/>
        <field name="assetId" type="id"/>
        <field name="organizationPartyId" type="id"/>
        <field name="assetGlAccountId" type="id"><description>
            The debit account for the asset value (purchase cost) on receipt and credit account on issuance;
            for inventory assets this is the inventory value account (GatInventory);
            for fixed assets this is a fixed asset value account (GatFixedAsset);
            for supplies this is an expense account (GatExpense or GatOperatingExpense)
        </description></field>
        <field name="wipAssetGlAccountId" type="id"><description>
            The debit account for the asset value (purchase cost) on issue to production run (inventory consumed).
            The credit account on receive from production run (inventory produced).
            The opposing account will be the assetGlAccountId.
        </description></field>
        <field name="receiptGlAccountId" type="id">
            <description>The credit account on receipt (Unreceived Inventory, Unreceived Asset, etc)</description></field>
        <field name="issuanceGlAccountId" type="id"><description>
            The debit account on issuance AND credit account for accumulated depreciation for fixed assets;
            for inventory assets this is the COGS account (GatCogs);
            for fixed assets this is the Unissued Asset account (GatUnissuedFixedAsset)
        </description></field>
        <field name="transferGlAccountId" type="id"><description>The credit account on for inventory being transferred (in transit),
                used instead of receipt and issuance accounts for transfer shipments, etc</description></field>

        <field name="accDepreciationGlAccountId" type="id">
            <description>The credit account for the depreciation expense for Fixed Assets (paired with depreciationGlAccountId);
                A debit account for Fixed Asset sale or write off</description></field>
        <field name="depreciationGlAccountId" type="id">
            <description>The debit account for the depreciation expense for Fixed Assets (paired with accDepreciationGlAccountId)</description></field>
        <field name="profitGlAccountId" type="id"><description>The credit account for the eventual profit/gain derived
            from the sale of the asset; for inventory assets this is a Sales account;
            for fixed assets this is a profit/gain on sale/disposal account</description></field>
        <field name="lossGlAccountId" type="id">
            <description>The debit account for the loss derived from the disposal of the asset</description></field>
        <field name="receiptTransTypeEnumId" type="id"/>
        <field name="issuanceTransTypeEnumId" type="id"/>

        <field name="shrinkageGlAccountId" type="id">
            <description>The debit account for the loss (or cost) for inventory shrinkage or lost fixed assets</description></field>
        <field name="foundGlAccountId" type="id">
            <description>The credit account for the gain from inventory or fixed assets found</description></field>

        <relationship type="one" title="AssetType" related="moqui.basic.Enumeration">
            <key-map field-name="assetTypeEnumId"/></relationship>
        <relationship type="one" title="AssetClass" related="moqui.basic.Enumeration">
            <key-map field-name="classEnumId"/></relationship>
        <relationship type="one" related="mantle.product.asset.Asset"/>
        <relationship type="one" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="Asset" related="mantle.ledger.account.GlAccount">
            <key-map field-name="assetGlAccountId"/></relationship>
        <relationship type="one" title="WipAsset" related="mantle.ledger.account.GlAccount">
            <key-map field-name="wipAssetGlAccountId"/></relationship>
        <relationship type="one" title="Receipt" related="mantle.ledger.account.GlAccount">
            <key-map field-name="receiptGlAccountId"/></relationship>
        <relationship type="one" title="Issuance" related="mantle.ledger.account.GlAccount">
            <key-map field-name="issuanceGlAccountId"/></relationship>
        <relationship type="one" title="Depreciation" related="mantle.ledger.account.GlAccount">
            <key-map field-name="depreciationGlAccountId"/></relationship>
        <relationship type="one" title="Profit" related="mantle.ledger.account.GlAccount">
            <key-map field-name="profitGlAccountId"/></relationship>
        <relationship type="one" title="Loss" related="mantle.ledger.account.GlAccount">
            <key-map field-name="lossGlAccountId"/></relationship>
        <relationship type="one" title="ReceiptTransType" related="moqui.basic.Enumeration">
            <!-- NOTE: enumTypeId=AcctgTransType, different from title -->
            <key-map field-name="receiptTransTypeEnumId"/></relationship>
        <relationship type="one" title="IssuanceTransType" related="moqui.basic.Enumeration">
            <!-- NOTE: enumTypeId=AcctgTransType, different from title -->
            <key-map field-name="issuanceTransTypeEnumId"/></relationship>
        <relationship type="one" title="Shrinkage" related="mantle.ledger.account.GlAccount">
            <key-map field-name="shrinkageGlAccountId"/></relationship>
        <relationship type="one" title="Found" related="mantle.ledger.account.GlAccount">
            <key-map field-name="foundGlAccountId"/></relationship>
    </entity>
    <entity entity-name="CreditCardTypeGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="creditCardTypeEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="CreditCardType" related="moqui.basic.Enumeration">
            <key-map field-name="creditCardTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="FinancialAccountTypeGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="finAccountTypeId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" related="FinancialAccountType"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="FinancialAccountReasonGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="reasonEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="FinancialAccountTransReason" related="moqui.basic.Enumeration">
            <key-map field-name="reasonEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="GlAccountTypePartyDefault" package="mantle.ledger.config" use="configuration">
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <field name="glAccountTypeEnumId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.party.Party"/>
        <relationship type="one" related="mantle.party.RoleType"/>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="GlAccountTypeDefault" package="mantle.ledger.config" use="configuration">
        <field name="glAccountTypeEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="InvoiceTypeTransType" package="mantle.ledger.config" use="configuration">
        <field name="invoiceTypeEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="isPayable" type="text-indicator" is-pk="true"><description>If Y is Payable, N is Receivable.</description></field>
        <field name="acctgTransTypeEnumId" type="id"/>
        <field name="glAccountId" type="id"><description>If not specified uses the GlAccountTypeDefault setting for
            GatAccountsReceivable or GatAccountsPayable</description></field>
        <relationship type="one" title="InvoiceType" related="moqui.basic.Enumeration">
            <key-map field-name="invoiceTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="AcctgTransType" related="moqui.basic.Enumeration">
            <key-map field-name="acctgTransTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="ItemTypeGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="itemTypeEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="direction" type="text-indicator" is-pk="true"><description>If I for Incoming (Purchase) Invoices
            and if O for Outgoing (Sales) Invoices. If E is for either.</description></field>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="ItemType" related="moqui.basic.Enumeration">
            <key-map field-name="itemTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="PaymentInstrumentGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="paymentInstrumentEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="isPayable" type="text-indicator" is-pk="true"><description>If Y is Payable, N is Receivable, E for either.</description></field>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="PaymentInstrument" related="moqui.basic.Enumeration">
            <key-map field-name="paymentInstrumentEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="PaymentTypeGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="paymentTypeEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="isPayable" type="text-indicator" is-pk="true"><description>If Y is Payable, N is Receivable.</description></field>
        <field name="isApplied" type="text-indicator" is-pk="true"><description>If Y is for Applied Payment, N for
            Unapplied Payment, E for either.</description></field>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="PaymentType" related="moqui.basic.Enumeration">
            <key-map field-name="paymentTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="ProductCategoryGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="productCategoryId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountTypeEnumId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"><description>Revenue account for products in the category</description></field>
        <field name="contraGlAccountId" type="id"><description>Contra Revenue account for products in the category</description></field>
        <relationship type="one" related="ProductCategory"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="ProductGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="productId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountTypeEnumId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"><description>Product Revenue account</description></field>
        <field name="contraGlAccountId" type="id"><description>Product Contra Revenue account</description></field>
        <relationship type="one" related="Product"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="TaxAuthorityGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="taxAuthorityId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" related="TaxAuthority"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>
    <entity entity-name="VarianceReasonGlAccount" package="mantle.ledger.config" use="configuration">
        <field name="varianceReasonEnumId" type="id" is-pk="true"/>
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="glAccountId" type="id"/>
        <relationship type="one" title="InventoryVarianceReason" related="moqui.basic.Enumeration">
            <key-map field-name="varianceReasonEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
    </entity>

    <entity entity-name="PartyAcctgPreference" package="mantle.ledger.config" use="configuration">
        <!-- TODO: consider refactoring to split out frequently updated fields like invoiceLastNumber, orderLastNumber;
            caching dilemma for entity as it contains fields that are used frequently, and others that are
            updated frequently -->
        <field name="organizationPartyId" type="id" is-pk="true"/>
        <field name="fiscalYearStartMonth" type="number-integer"/>
        <field name="fiscalYearStartDay" type="number-integer"/>
        <field name="realTimeGlSummary" type="text-indicator">
            <description>Defaults to N. If set to Y GlAccountOrganization and GlAccountOrgTimePeriod are updated with each AcctgTrans post.</description></field>
        <field name="hourlyTimePeriodTypeId" type="id"/>
        <field name="salaryTimePeriodTypeId" type="id"/>
        <field name="taxFormEnumId" type="id"/>
        <field name="payrollTaxFormEnumId" type="id"/>
        <field name="taxClassificationEnumId" type="id"/>
        <field name="employerClassEnumId" type="id"/>
        <field name="cogsMethodEnumId" type="id"/>
        <field name="baseCurrencyUomId" type="id"><description>The unit of account currency for the Internal Organization</description></field>
        <field name="localCurrencyUomId" type="id"><description>For unstable local currencies when different from a more stable base currency</description></field>
        <field name="invoiceSequenceEnumId" type="id"/>
        <field name="invoiceIdPrefix" type="text-short"/>
        <field name="useInvoiceIdForReturns" type="text-indicator"/>
        <field name="orderSequenceEnumId" type="id"/>
        <field name="orderIdPrefix" type="text-short"/>
        <field name="refundPaymentMethodId" type="id"/>
        <field name="errorGlJournalId" type="id"><description>
            Journal to which all the failed automatic transaction are assigned.
            If the error journal is set, if the GL posting fails for some reason the triggering operation
            (finalizing an invoice or payment or whatever) would NOT roll back, instead the partial GL post would be
            placed into the error journal.
        </description></field>
        <field name="glAccountCodeMask" type="text-short"/>
        <field name="settlementTermId" type="id">
            <description>The default SettlementTerm to use on receivable (outgoing) invoices if there is none from agreement, order, etc</description></field>
        <!-- these should be on a separate entity when used, transactional where the rest is configuration:
        <field name="invoiceLastNumber" type="number-integer"/>
        <field name="invoiceLastRestartDate" type="date-time"/>
        <field name="orderLastNumber" type="number-integer"/>
        -->

        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="Hourly" related="mantle.party.time.TimePeriodType">
            <key-map field-name="hourlyTimePeriodTypeId"/></relationship>
        <relationship type="one" title="Salary" related="mantle.party.time.TimePeriodType">
            <key-map field-name="salaryTimePeriodTypeId"/></relationship>
        <relationship type="one" title="TaxForm" related="moqui.basic.Enumeration" short-alias="taxForm">
            <key-map field-name="taxFormEnumId"/></relationship>
        <relationship type="one" title="PayrollTaxForm" related="moqui.basic.Enumeration" short-alias="payrollTaxForm">
            <key-map field-name="payrollTaxFormEnumId"/></relationship>
        <relationship type="one" title="TaxClassification" related="moqui.basic.Enumeration" short-alias="taxClassification">
            <key-map field-name="taxClassificationEnumId"/></relationship>
        <relationship type="one" title="EmployerClassification" related="moqui.basic.Enumeration" short-alias="employerClassification">
            <key-map field-name="employerClassEnumId"/></relationship>
        <relationship type="one" title="CogsMethod" related="moqui.basic.Enumeration" short-alias="cogsMethod">
            <key-map field-name="cogsMethodEnumId"/></relationship>
        <relationship type="one" title="BaseCurrency" related="moqui.basic.Uom">
            <key-map field-name="baseCurrencyUomId"/></relationship>
        <relationship type="one" title="LocalCurrency" related="moqui.basic.Uom">
            <key-map field-name="localCurrencyUomId"/></relationship>
        <relationship type="one" title="Refund" related="mantle.account.method.PaymentMethod">
            <key-map field-name="refundPaymentMethodId"/></relationship>
        <relationship type="one" related="mantle.ledger.transaction.GlJournal">
            <key-map field-name="errorGlJournalId"/></relationship>
        <relationship type="one" title="InvoiceSequence" related="moqui.basic.Enumeration">
            <key-map field-name="invoiceSequenceEnumId"/></relationship>
        <relationship type="one" title="OrderSequence" related="moqui.basic.Enumeration">
            <key-map field-name="orderSequenceEnumId"/></relationship>
        <relationship type="one" related="mantle.account.invoice.SettlementTerm"/>

        <seed-data>
            <!-- Tax Forms -->
            <moqui.basic.EnumerationType description="Tax Form" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 1120" enumId="TxfUsIrs1120" sequenceNum="1" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 1120S" enumId="TxfUsIrs1120S" sequenceNum="2" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 1065" enumId="TxfUsIrs1065" sequenceNum="3" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 990" enumId="TxfUsIrs990" sequenceNum="4" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 990-PF" enumId="TxfUsIrs990PF" sequenceNum="5" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 990-T" enumId="TxfUsIrs990T" sequenceNum="6" enumTypeId="TaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 1040" enumId="TxfUsIrs1040" sequenceNum="7" enumTypeId="TaxForm"/>

            <!-- Payroll Tax Forms -->
            <moqui.basic.EnumerationType description="Payroll Tax Form" enumTypeId="PayrollTaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 941" enumId="PtxfUsIrs941" enumTypeId="PayrollTaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 943" enumId="PtxfUsIrs943" enumTypeId="PayrollTaxForm"/>
            <moqui.basic.Enumeration description="US IRS Form 944" enumId="PtxfUsIrs944" enumTypeId="PayrollTaxForm"/>
            <moqui.basic.Enumeration description="US IRS Schedule H" enumId="PtxfUsIrsSchH" enumTypeId="PayrollTaxForm"/>
            <moqui.basic.Enumeration description="US IRS CT-1" enumId="PtxfUsIrsCT1" enumTypeId="PayrollTaxForm"/>

            <!-- Tax Classification -->
            <moqui.basic.EnumerationType description="Tax Classification" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - Individual, Sole Proprietor, Single-member LLC" enumId="TxcIndividual" sequenceNum="1" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - C Corporation" enumId="TxcCCorp" sequenceNum="2" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - S Corporation" enumId="TxcSCorp" sequenceNum="3" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - Partnership" enumId="TxcPartnership" sequenceNum="4" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - Trust/Estate" enumId="TxcTrustEstate" sequenceNum="5" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - LLC as S Corp" enumId="TxcLlcSCorp" sequenceNum="6" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - LLC as C Corp" enumId="TxcLlcCCorp" sequenceNum="7" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="USA - LLC as Partnership" enumId="TxcLlcPartnership" sequenceNum="8" enumTypeId="TaxClassification"/>
            <moqui.basic.Enumeration description="Other" enumId="TxcOther" sequenceNum="9" enumTypeId="TaxClassification"/>

            <!-- Employer Classification -->
            <moqui.basic.EnumerationType description="Employer Classification" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Agriculture (943)" enumId="EmclsUsIrsAgriculture" enumCode="A" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Household (Sch H)" enumId="EmclsUsIrsHousehold" enumCode="H" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Military (941)" enumId="EmclsUsIrsMilitary" enumCode="M" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Medicare Qualified Government (941)" enumId="EmclsUsIrsQualGovernment" enumCode="Q" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Railroad (CT-1)" enumId="EmclsUsIrsRailroad" enumCode="X" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Regular (944)" enumId="EmclsUsIrsRegular" enumCode="F" enumTypeId="EmployerClassification"/>
            <moqui.basic.Enumeration description="US IRS Regular (all others) (941)" enumId="EmclsUsIrsRegularOther" enumCode="R" enumTypeId="EmployerClassification"/>

            <!-- Cost Of Goods Sold methods -->
            <moqui.basic.EnumerationType description="COGS Method" enumTypeId="CogsMethod"/>
            <moqui.basic.Enumeration description="LIFO" enumId="CogsLifo" sequenceNum="1" enumTypeId="CogsMethod"/>
            <moqui.basic.Enumeration description="FIFO" enumId="CogsFifo" sequenceNum="2" enumTypeId="CogsMethod"/>
            <moqui.basic.Enumeration description="Average Cost" enumId="CogsAverageCost" sequenceNum="3" enumTypeId="CogsMethod"/>
            <moqui.basic.Enumeration description="Inventory Actual Cost" enumId="CogsActualCost" sequenceNum="4" enumTypeId="CogsMethod"/>

            <!-- Accounting Preference Sequencing Modes -->
            <moqui.basic.EnumerationType description="Invoice Sequence Mode" enumTypeId="InvoiceSequence"/>
            <moqui.basic.Enumeration description="Standard (faster, may have gaps, per system)" enumId="InvSqStandard" sequenceNum="1" enumTypeId="InvoiceSequence"/>
            <moqui.basic.Enumeration description="Enforced Sequence (no gaps, per organization)" enumId="InvSqEnforced" sequenceNum="2" enumTypeId="InvoiceSequence"/>
            <moqui.basic.Enumeration description="Enforced and Restart on Fiscal Year (no gaps, per org, reset to 1 each year)" enumId="InvSqEnfRestartYr" sequenceNum="3" enumTypeId="InvoiceSequence"/>

            <moqui.basic.EnumerationType description="Order Sequence Mode" enumTypeId="OrderSequence"/>
            <moqui.basic.Enumeration description="Standard (faster, may have gaps, per system)" enumId="OrdSqStandard" sequenceNum="1" enumTypeId="OrderSequence"/>
            <moqui.basic.Enumeration description="Enforced Sequence (no gaps, per organization)" enumId="OrdSqEnforced" sequenceNum="2" enumTypeId="OrderSequence"/>
        </seed-data>
    </entity>

    <!-- ========================================================= -->
    <!-- mantle.ledger.reconciliation -->
    <!-- ========================================================= -->

    <entity entity-name="GlReconciliation" package="mantle.ledger.reconciliation" cache="never">
        <field name="glReconciliationId" type="id" is-pk="true"/>
        <field name="glReconciliationName" type="text-medium"/>
        <field name="description" type="text-medium"/>
        <field name="glAccountId" type="id"/>
        <field name="statusId" type="id" enable-audit-log="true"/>
        <field name="organizationPartyId" type="id"/>
        <field name="reconciledBalance" type="currency-amount"/>
        <field name="openingBalance" type="currency-amount"/>
        <field name="reconciledDate" type="date-time"/>
        <relationship type="one" related="mantle.ledger.account.GlAccount"/>
        <relationship type="one" title="Organization" related="mantle.party.Party">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" title="GlReconciliation" related="moqui.basic.StatusItem"/>
        <seed-data>
            <!-- GlReconciliation Status -->
            <moqui.basic.StatusType statusTypeId="GlReconciliation" description="GL Reconciliation Status"/>
            <moqui.basic.StatusItem statusId="GLREC_CREATED" statusTypeId="GlReconciliation" sequenceNum="1" description="Created"/>
            <moqui.basic.StatusItem statusId="GLREC_RECONCILED" statusTypeId="GlReconciliation" sequenceNum="2" description="Reconciled"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="GLREC_CREATED" toStatusId="GLREC_RECONCILED" transitionName="Set Created to Reconciled"/>
        </seed-data>
    </entity>
    <entity entity-name="GlReconciliationEntry" package="mantle.ledger.reconciliation" cache="never">
        <field name="glReconciliationId" type="id" is-pk="true"/>
        <field name="acctgTransId" type="id" is-pk="true"/>
        <field name="acctgTransEntrySeqId" type="id" is-pk="true"/>
        <field name="reconciledAmount" type="currency-amount"/>
        <relationship type="one" related="mantle.ledger.reconciliation.GlReconciliation"/>
        <relationship type="one-nofk" related="mantle.ledger.transaction.AcctgTrans"/>
        <relationship type="one" related="mantle.ledger.transaction.AcctgTransEntry">
            <key-map field-name="acctgTransId"/><key-map field-name="acctgTransEntrySeqId"/></relationship>
    </entity>

    <!-- ========================================================= -->
    <!-- mantle.ledger.transaction -->
    <!-- ========================================================= -->

    <entity entity-name="AcctgTrans" package="mantle.ledger.transaction" short-alias="acctgTrans" use="transactional" cache="never">
        <field name="acctgTransId" type="id" is-pk="true"/>
        <field name="acctgTransTypeEnumId" type="id"/>
        <field name="organizationPartyId" type="id"/>
        <field name="description" type="text-medium"/>
        <field name="transactionDate" type="date-time" enable-audit-log="update"/>
        <field name="isPosted" type="text-indicator" enable-audit-log="true"/>
        <field name="postedDate" type="date-time" enable-audit-log="update"/>
        <field name="scheduledPostingDate" type="date-time"/>
        <field name="glJournalId" type="id"/>
        <field name="glFiscalTypeEnumId" type="id"/>
        <field name="voucherRef" type="text-short"/>
        <field name="voucherDate" type="date-time"/>
        <field name="groupStatusId" type="id"/>
        <field name="amountUomId" type="id"><description>The unit of account (base) currency, must match PartyAcctgPreference.baseCurrencyUomId</description></field>
        <field name="localCurrencyUomId" type="id"><description>The local currency for the Organization, must match PartyAcctgPreference.localCurrencyUomId</description></field>
        <field name="originalCurrencyUomId" type="id"><description>The original currency for the invoice, payment, etc - the currency used to interact with the external Party</description></field>

        <field name="assetId" type="id"/>
        <field name="assetIssuanceId" type="id"/>
        <field name="assetReceiptId" type="id"/>
        <field name="physicalInventoryId" type="id"/>
        <field name="otherPartyId" type="id"/>
        <field name="invoiceId" type="id"/>
        <field name="paymentId" type="id"/>
        <field name="paymentApplicationId" type="id"/>
        <field name="toInvoiceId" type="id"/>
        <field name="toPaymentId" type="id"/>
        <field name="finAccountTransId" type="id"/>
        <field name="shipmentId" type="id"/>
        <field name="workEffortId" type="id"/>
        <field name="theirAcctgTransId" type="text-short"/>
        <field name="reversedByAcctgTransId" type="id"/>
        <field name="reverseOfAcctgTransId" type="id"/>

        <relationship type="one" title="AcctgTransType" related="moqui.basic.Enumeration" short-alias="type">
            <key-map field-name="acctgTransTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party" short-alias="organization">
            <key-map field-name="organizationPartyId"/></relationship>
        <relationship type="one" related="mantle.ledger.transaction.GlJournal" short-alias="journal"/>
        <relationship type="one" title="GlFiscalType" related="moqui.basic.Enumeration" short-alias="fiscalType">
            <key-map field-name="glFiscalTypeEnumId"/></relationship>
        <relationship type="one" title="Group" related="moqui.basic.StatusItem" short-alias="groupStatus">
            <key-map field-name="groupStatusId"/></relationship>
        <relationship type="one" title="Amount" related="moqui.basic.Uom" short-alias="amountUom">
            <key-map field-name="amountUomId"/></relationship>
        <relationship type="one" title="LocalCurrency" related="moqui.basic.Uom" short-alias="localCurrencyUom">
            <key-map field-name="localCurrencyUomId"/></relationship>
        <relationship type="one" title="OriginalCurrency" related="moqui.basic.Uom" short-alias="originalCurrencyUom">
            <key-map field-name="originalCurrencyUomId"/></relationship>

        <relationship type="one" related="mantle.product.asset.Asset" short-alias="asset"/>
        <relationship type="one" related="mantle.product.issuance.AssetIssuance" short-alias="assetIssuance"/>
        <relationship type="one" related="mantle.product.receipt.AssetReceipt" short-alias="assetReceipt"/>
        <relationship type="one" related="mantle.product.asset.PhysicalInventory" short-alias="physicalInventory"/>
        <relationship type="one" title="Other" related="mantle.party.Party" short-alias="otherParty">
            <key-map field-name="otherPartyId"/></relationship>
        <relationship type="one" related="mantle.account.invoice.Invoice" short-alias="invoice"/>
        <relationship type="one" related="mantle.account.payment.Payment" short-alias="payment"/>
        <relationship type="one" related="mantle.account.payment.PaymentApplication" short-alias="paymentApplication"/>
        <relationship type="one" title="To" related="mantle.account.invoice.Invoice" short-alias="toInvoice">
            <key-map field-name="toInvoiceId"/></relationship>
        <relationship type="one" title="To" related="mantle.account.payment.Payment" short-alias="toPayment">
            <key-map field-name="toPaymentId"/></relationship>
        <relationship type="one" related="mantle.account.financial.FinancialAccountTrans" short-alias="financialAccountTrans"/>
        <relationship type="one" related="mantle.shipment.Shipment" short-alias="shipment"/>
        <relationship type="one" related="mantle.work.effort.WorkEffort" short-alias="workEffort"/>
        <relationship type="one" title="ReversedBy" related="mantle.ledger.transaction.AcctgTrans" short-alias="reversedBy">
            <key-map field-name="reversedByAcctgTransId" related="acctgTransId"/></relationship>
        <relationship type="one" title="ReverseOf" related="mantle.ledger.transaction.AcctgTrans" short-alias="reverseOf">
            <key-map field-name="reverseOfAcctgTransId" related="acctgTransId"/></relationship>

        <relationship type="many" related="mantle.ledger.transaction.AcctgTransEntry" short-alias="entries">
            <key-map field-name="acctgTransId"/></relationship>

        <index name="ACCTG_TRANS_TX_DATE"><index-field name="transactionDate"/></index>
        
        <seed-data>
            <!-- Accounting Transaction Type -->
            <moqui.basic.EnumerationType description="Accounting Transaction Type" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttAmortization" description="Amortization" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttDepreciation" description="Depreciation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttCapitalization" description="Capitalization" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPeriodClosing" description="Period Closing Adjustment" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttNetIncomeClosing" description="Net Income Period Closing" enumTypeId="AcctgTransType"/>

            <moqui.basic.Enumeration enumId="AttInternal" description="Internal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttExternal" description="External" enumTypeId="AcctgTransType"/>

            <moqui.basic.Enumeration enumId="AttObligation" description="Obligation" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttCreditLine" description="Credit Line" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttNote" description="Note" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttOtherObligation" description="Other Obligation" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttSales" description="Sales" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttTaxDue" description="Tax Due" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>

            <!-- Payment TX Types -->
            <moqui.basic.Enumeration enumId="AttPayment" description="Payment" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttDisbursement" description="Disbursement" parentEnumId="AttPayment" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttReceipt" description="Receipt" parentEnumId="AttPayment" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPaymentAdjust" description="Payment Adjustment" parentEnumId="AttPayment" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttIncomingPayment" description="Incoming Payment" enumTypeId="AcctgTransType"/><!-- (Receipt) -->
            <moqui.basic.Enumeration enumId="AttOutgoingPayment" description="Outgoing Payment" enumTypeId="AcctgTransType"/><!-- (Disbursement) -->
            <!-- PaymentApplication TX Types -->
            <moqui.basic.Enumeration enumId="AttIncomingPaymentAp" description="Incoming Payment Application" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttOutgoingPaymentAp" description="Outgoing Payment Application" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPaymentInOutAppl" description="Payment In/Out Application" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttInvoiceInOutAppl" description="Invoice AR/AP Application" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPaymentApplied" description="Payment Application" enumTypeId="AcctgTransType"/>
            <!-- Invoice TX Types -->
            <moqui.basic.Enumeration enumId="AttSalesInvoice" description="Sales Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/><!-- (to Customer) -->
            <moqui.basic.Enumeration enumId="AttCustRtnInvoice" description="Customer Return Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPurchaseInvoice" description="Purchase Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/><!-- (from Vendor) -->
            <moqui.basic.Enumeration enumId="AttVendRtnInvoice" description="Supplier Return Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttCreditMemo" description="Customer Credit Memo" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttVendCreditMemo" description="Supplier Credit Memo" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttPayrollInvoice" description="Payroll Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttTaxInvoice" description="Tax Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttGarnishmentInvoice" description="Garnishment Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttCommissionInvoice" description="Commission Invoice" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttInvoiceAdjust" description="Invoice Adjustment" parentEnumId="AttObligation" enumTypeId="AcctgTransType"/>
            <!-- Asset/Inventory TX Types -->
            <moqui.basic.Enumeration enumId="AttAssetReceipt" description="Asset Receipt" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttAssetIssuance" description="Asset Issuance" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttAssetVariance" description="Asset Variance" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttInventoryReceipt" description="Inventory Receipt" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttInventoryIssuance" description="Inventory Issuance" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttInventoryVariance" description="Inventory Variance" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttSalesInventory" description="Sales Inventory" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttReturnInventory" description="Return Inventory" parentEnumId="AttExternal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttManufacturing" description="Manufacturing" enumTypeId="AcctgTransType"/>
            <!-- FinancialAccount TX Types -->
            <moqui.basic.Enumeration enumId="AttFinancialDeposit" description="Fin. Account Deposit" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttFinancialWithdrawal" description="Fin. Account Withdrawal" enumTypeId="AcctgTransType"/>
            <moqui.basic.Enumeration enumId="AttFinancialAdjustment" description="Fin. Account Adjustment" enumTypeId="AcctgTransType"/>

            <moqui.basic.Enumeration description="Acc TX Types Invoice" enumId="EngAccTxTypesInvoice" enumTypeId="EnumGroup">
                <groupMembers enumId="AttSalesInvoice"/><groupMembers enumId="AttCustRtnInvoice"/><groupMembers enumId="AttPurchaseInvoice"/>
                <groupMembers enumId="AttVendRtnInvoice"/><groupMembers enumId="AttPayrollInvoice"/><groupMembers enumId="AttTaxInvoice"/>
                <groupMembers enumId="AttGarnishmentInvoice"/><groupMembers enumId="AttCommissionInvoice"/>
                <groupMembers enumId="AttInvoiceAdjust"/>
            </moqui.basic.Enumeration>
            <moqui.basic.Enumeration description="Acc TX Types Payable" enumId="EngAccTxTypesPayable" enumTypeId="EnumGroup">
                <groupMembers enumId="AttCustRtnInvoice"/><groupMembers enumId="AttPurchaseInvoice"/>
                <groupMembers enumId="AttPayrollInvoice"/><groupMembers enumId="AttTaxInvoice"/>
                <groupMembers enumId="AttGarnishmentInvoice"/><groupMembers enumId="AttCommissionInvoice"/>
                <groupMembers enumId="AttInvoiceAdjust"/>
            </moqui.basic.Enumeration>
            <moqui.basic.Enumeration description="Acc TX Types Receivable" enumId="EngAccTxTypesReceivable" enumTypeId="EnumGroup">
                <groupMembers enumId="AttSalesInvoice"/><groupMembers enumId="AttVendRtnInvoice"/>
                <groupMembers enumId="AttInvoiceAdjust"/>
            </moqui.basic.Enumeration>

            <!-- GL Fiscal Type -->
            <moqui.basic.EnumerationType description="GL Fiscal Type" enumTypeId="GlFiscalType"/>
            <moqui.basic.Enumeration description="Actual" enumId="GLFT_ACTUAL" enumTypeId="GlFiscalType"/>
            <moqui.basic.Enumeration description="Budget" enumId="GLFT_BUDGET" enumTypeId="GlFiscalType"/>
            <moqui.basic.Enumeration description="Forecast" enumId="GLFT_FORECAST" enumTypeId="GlFiscalType"/>
            <moqui.basic.Enumeration description="Plan" enumId="GLFT_PLAN" enumTypeId="GlFiscalType"/>
            <moqui.basic.Enumeration description="Scenario" enumId="GLFT_SCENARIO" enumTypeId="GlFiscalType"/>

            <!-- Accounting Transaction Result - used on various records to track auto post result -->
            <moqui.basic.EnumerationType description="Accounting Transaction Result" enumTypeId="AcctgTransResult"/>
            <moqui.basic.Enumeration enumId="AtrSuccess" description="Success" enumTypeId="AcctgTransResult"/>
            <moqui.basic.Enumeration enumId="AtrNoAcctgPreference" description="No Accounting Preference" enumTypeId="AcctgTransResult"/>
            <moqui.basic.Enumeration enumId="AtrNoAcquireCost" description="No Acquire Cost" enumTypeId="AcctgTransResult"/><!-- for AssetReceipt/Issuance/etc -->
            <moqui.basic.Enumeration enumId="AtrNoTransReason" description="No Transaction Reason" enumTypeId="AcctgTransResult"/><!-- for FinancialAccountTrans -->
            <moqui.basic.Enumeration enumId="AtrPaymentNotPosted" description="Payment Not Posted" enumTypeId="AcctgTransResult"/><!-- for PaymentApplication -->
        </seed-data>
        <master>
            <detail relationship="type"/><detail relationship="organization"/><detail relationship="journal"/>
            <detail relationship="fiscalType"/><detail relationship="groupStatus"/><detail relationship="amountUom"/>
            <detail relationship="originalCurrencyUom"/>
            <detail relationship="asset"/><detail relationship="assetIssuance"/><detail relationship="assetReceipt"/>
            <detail relationship="physicalInventory"/><detail relationship="otherParty"/>
            <detail relationship="invoice"/><detail relationship="payment"/><detail relationship="paymentApplication"/>
            <detail relationship="financialAccountTrans"/><detail relationship="shipment"/>
            <detail relationship="workEffort"/><detail relationship="reversedBy"/><detail relationship="reverseOf"/>

            <detail relationship="entries">
                <detail relationship="glAccountType"/><detail relationship="glAccount"/>
                <detail relationship="reconcileStatus"/>
                <detail relationship="product"/><detail relationship="asset"/>
            </detail>
        </master>
    </entity>
    <entity entity-name="AcctgTransEntry" package="mantle.ledger.transaction" use="transactional" cache="never">
        <field name="acctgTransId" type="id" is-pk="true"/>
        <field name="acctgTransEntrySeqId" type="id" is-pk="true"/>
        <field name="debitCreditFlag" type="text-indicator"><description>If D is a debit, if C is a credit.</description></field>
        <field name="amount" type="currency-amount" enable-audit-log="update"/>
        <field name="localCurrencyAmount" type="currency-amount" enable-audit-log="update"/>
        <field name="originalCurrencyAmount" type="currency-amount"/>
        <field name="description" type="text-medium"/>
        <field name="voucherRef" type="text-short"/>
        <field name="glAccountTypeEnumId" type="id"/>
        <field name="glAccountId" type="id" enable-audit-log="update"/>
        <field name="dueDate" type="date"/>
        <field name="reconcileStatusId" type="id" default="'AterNot'"/>
        <field name="settlementTermId" type="id"/>
        <field name="isSummary" type="text-indicator"><description>Set to Y if this is a summary entry from a sub-ledger.</description></field>

        <field name="productId" type="id"/>
        <field name="externalProductId" type="id"/>
        <field name="assetId" type="id"/>
        <field name="invoiceItemSeqId" type="id"/>

        <relationship type="one" related="mantle.ledger.transaction.AcctgTrans" short-alias="trans"/>
        <relationship type="one" title="GlAccountType" related="moqui.basic.Enumeration" short-alias="glAccountType">
            <key-map field-name="glAccountTypeEnumId"/></relationship>
        <relationship type="one" related="mantle.ledger.account.GlAccount" short-alias="glAccount"/>
        <relationship type="one" title="AcctgTransEntryReconcile" related="moqui.basic.StatusItem" short-alias="reconcileStatus">
            <key-map field-name="reconcileStatusId"/></relationship>
        <relationship type="one" related="SettlementTerm" short-alias="settlementTerm"/>
        <relationship type="one" related="mantle.product.Product" short-alias="product"/>
        <relationship type="one" related="mantle.product.asset.Asset" short-alias="asset"/>

        <seed-data>
            <!-- Accounting Transaction Entry Reconcile Status -->
            <moqui.basic.StatusType description="Accounting Transaction Entry Reconcile Status" statusTypeId="AcctgTransEntryReconcile"/>
            <moqui.basic.StatusItem description="Not Reconciled" sequenceNum="1" statusId="AterNot" statusTypeId="AcctgTransEntryReconcile"/>
            <moqui.basic.StatusItem description="Partly Reconciled" sequenceNum="2" statusId="AterPartly" statusTypeId="AcctgTransEntryReconcile"/>
            <moqui.basic.StatusItem description="Reconciled" sequenceNum="3" statusId="AterRec" statusTypeId="AcctgTransEntryReconcile"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="AterNot" toStatusId="AterPartly" transitionName="Partly Reconcile"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="AterNot" toStatusId="AterRec" transitionName="Reconcile"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="AterPartly" toStatusId="AterRec" transitionName="Reconcile"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="AterPartly" toStatusId="AterNot" transitionName="Unreconcile"/>
            <moqui.basic.StatusFlowTransition statusFlowId="Default" statusId="AterRec" toStatusId="AterNot" transitionName="Unreconcile"/>
        </seed-data>
    </entity>
    <entity entity-name="GlJournal" package="mantle.ledger.transaction" use="transactional" cache="never">
        <field name="glJournalId" type="id" is-pk="true"/>
        <field name="glJournalTypeEnumId" type="id"/>
        <field name="glJournalName" type="text-medium"/>
        <field name="organizationPartyId" type="id"/>
        <field name="isPosted" type="text-indicator"/>
        <field name="postedDate" type="date-time"/>
        <relationship type="one" title="GlJournalType" related="moqui.basic.Enumeration" short-alias="glJournalTypeEnum">
            <key-map field-name="glJournalTypeEnumId"/></relationship>
        <relationship type="one" title="Organization" related="mantle.party.Party" short-alias="organizationParty">
            <key-map field-name="organizationPartyId"/></relationship>
        <seed-data>
            <!-- GL Journal Type -->
            <moqui.basic.EnumerationType description="GL Journal Type" enumTypeId="GlJournalType"/>
            <moqui.basic.Enumeration enumId="GLJRNL_ERROR" description="Error Journal" enumTypeId="GlJournalType"/>
            <moqui.basic.Enumeration enumId="GLJRNL_MANUAL" description="Manual Transactions Journal" enumTypeId="GlJournalType"/>
        </seed-data>
    </entity>
</entities>
